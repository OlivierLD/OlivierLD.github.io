<!DOCTYPE html>
<html lang="en">
<!-- 
	TODO 
	- Multilingue
	- Background
-->
<head>
	<meta charset="UTF-8">
	<title>Passe-Coque</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/png" href="./infinity.png">
	<link rel="stylesheet" href="./passe-coque.css">
	<!--script type="module" src="../../webcomponents/widgets/slideshow/SlideShow.js"></script-->
	<style type="text/css">

:root {
  --small-screen-width: 1000px;
  --slider-scale: 0.5;
}

* {
	font-family: "Open Sans", "DejaVu Sans", sans-serif;
    font-weight: 300;
    font-style: normal;
}		

h1 {
	font-size: 4em;
	font-weight: 600;
	text-align: center;
	color: blue;
	text-shadow: 2px 2px 4px black, 0 0 25px white, 0 0 7px cyan;
}

dialog {
	background: rgba(25, 25, 25, 0.75);
	color: silver;
	width: 400px;
	top: 50px;
	border: 2px solid orange;
	border-radius: 10px;
}

.text-content {
	/* text-shadow: 2px 2px 4px black, 0 0 25px white, 0 0 7px cyan; */
	color: blue;
	/* font-weight: bold; */
}

#lang-flag:hover {
	box-shadow: 4px 4px 8px black, 0 0 25px white, 0 0 10px cyan;
}

.background {
  /*color: #999999;*/
  position: absolute;
  width: 100%;
  text-align: center;
  top: 0;
  left: 0;
  z-index: -100;
}
.bg-data {
  font-family: "Courier New", sans-serif;
  font-size: 256px;
  font-weight: bold;
  color: lightskyblue;
  text-align: center;
  /* margin-top: 125px; */
  /* margin-left: 20px; */
  overflow-y: scroll;
}

/* For the switch (slider) */
.switch {
  position: relative;
  display: inline-block;
  width: calc(var(--slider-scale) * 60px);
  height: calc(var(--slider-scale) * 34px);
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: calc(var(--slider-scale) * 26px);
  width: calc(var(--slider-scale) * 26px);
  left: calc(var(--slider-scale) * 4px);
  bottom: calc(var(--slider-scale) * 4px);
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #2196f3;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196f3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(calc(var(--slider-scale) * 26px));
  -ms-transform: translateX(calc(var(--slider-scale) * 26px));
  transform: translateX(calc(var(--slider-scale) * 26px));
}

/* Rounded sliders */
.slider.round {
  border-radius: calc(var(--slider-scale) * 34px);
}

.slider.round:before {
  border-radius: 50%;
}

/* Switch grid */
.switch-container {
  display: grid;
  grid-template-columns: calc(var(--slider-scale) * 80px) 200px;
  width: 500px;
}
.switch-element {
  place-self: flex-start;
}

.dialog-header {
    font-size: 24px;
    font-weight: 700;
}

.dialog-header-close {
  float: right;
}
.dialog-header-close:hover {
  color: cyan;
  cursor: pointer;
}

html {
  display: table;
  width: 100%;
  height: 100%;
}

a:link {
	color: #0000a0
}

a:active {
	color: #8080ff
}

a:visited {
	color: #8080ff
}

/* @media screen and (max-width: var(--small-screen-width)) { */
@media screen and (max-width: 1000px) { /* No var... */
	h1 {
		color: red;
		font-size: 4em;
	}
}

    </style>
</head>
	
<body>

	<dialog id="about-dialog" class="shadow-menu" style="width: 800px;">
		<div class="dialog-header">
		  <span><!-- Empty title --></span>
		  <span class="dialog-header-close" onclick="closeAboutDialog();">&times</span>
		</div>
		<div id="dialog-content">
		  <!-- Content goes here -->
		</div>
	</dialog>

	<!--
		** Structure du menu **
		▼ = &#9660;
		- Accueil
		- Qui sommes nous
			- Passe-Coque, c'est quoi ?
			- Notre equipe
			- L'association
			- La SCIC : Eco-village Nautique
		- Nos actions
			- Transmettre
			- Renover
			- Partager
			- Nos formations
			- Associations paretenaires
		- La flotte
			- Les bateaux
			- Les projets a saisir
			- Le boat club
		- Nous rejoindre
			- Faire un don
			- Inverstir dans la SCIC
			- Votre projet associatif
		- En savoir plus
			- Contact
			- Actualite
			- Visiter le chantier
			- Partenaires
	-->
	<div id="nav-menu" style="margin-left: -48px; margin-top: -8px;">
		<ul id="navigation"  style="display: grid; grid-template-columns: 80px 120px auto auto auto auto auto;"> <!-- Columns must match the menu below... -->
			<li><a href="#" onclick="switchLanguage();"><image id="lang-flag" src="./us_uk_flag.png" alt="US/UK Flag" title="Switch to English" style="width: 27px;"></image></a></li>
			<li><a href="#" onclick="clack(this);" id="1"><image src="./logo.passe-coque.png" style="width: 16px;" title="Passe-Coque"/> Accueil</a></li>
			<li>
				<a href="#" id="2">Qui sommes-nous&nbsp;?&nbsp;&#9660;</a>
				<ul>
					<li><a href="#" onclick="clack(this);" id="21">Passe-Coque, c'est quoi ?</a></li>
					<li><a href="#" onclick="clack(this);" id="22">Notre &eacute;quipe</a></li>
					<li><a href="#" onclick="clack(this);" id="23">L'association</a></li>
					<li><a href="#" onclick="clack(this);" id="24">La SCIC : Eco-village Nautique</a></li>
					<!--li>
						<a href="#">Service 3 &raquo;</a>
						<ul>
							<li><a href="#" onclick="clack(this);">SubMenu 1</a></li>
							<li><a href="#" onclick="clack(this);">SubMenu 2</a></li>
							<li><a href="#" onclick="clack(this);">SubMenu 3</a></li>
							<li><a href="#" onclick="clack(this);">SubMenu 4</a></li>
						</ul>					
					</li-->					
					<!--li><a href="#" onclick="clack(this);">Service 4</a></li-->
				</ul>
			</li>
			<li>
				<a href="#" onclick="clack(this);" id="3">Nos actions&nbsp;&#9660;</a>
				<ul>
					<li><a href="#" onclick="clack(this);" id="31">Transmettre</a></li>
					<li><a href="#" onclick="clack(this);" id="32">R&eacute;nover</a></li>
					<li><a href="#" onclick="clack(this);" id="33">Partager</a></li>
					<li><a href="#" onclick="clack(this);" id="34">Nos formations</a></li>
					<li><a href="#" onclick="clack(this);" id="35">Associations partenaires</a></li>
				</ul>
			</li>
			<li>
				<a href="#"  onclick="clack(this);" id="4">La flotte&nbsp;&#9660;</a>
				<ul>
					<li><a href="#" onclick="clack(this);" id="41">Les bateaux</a></li>
					<li><a href="#" onclick="clack(this);" id="42">Les projets &agrave; saisir</a></li>
					<li><a href="#" onclick="clack(this);" id="43">Le boat-club</a></li>
				</ul>
			</li>
			<li>
				<a href="#"  onclick="clack(this);" id="5">Nous rejoindre&nbsp;&#9660;</a>
				<ul>
					<li><a href="#" onclick="clack(this);" id="51">Faire un don</a></li>
					<li><a href="#" onclick="clack(this);" id="52">Inverstir dans la SCIC</a></li>
					<li><a href="#" onclick="clack(this);" id="53">Votre projet associatif</a></li>
				</ul>
			</li>
			<li>
				<a href="#"  onclick="clack(this);" id="6">En savoir plus&nbsp;&#9660;</a>
				<ul>
					<li><a href="#" onclick="clack(this);" id="61">Contact</a></li>
					<li><a href="#" onclick="clack(this);" id="62">Actualit&eacute;</a></li>
					<li><a href="#" onclick="clack(this);" id="63">Visiter le chantier</a></li>
					<li><a href="#" onclick="clack(this);" id="64">Partenaires</a></li>
				</ul>
			</li>
		</ul>
	</div>

	<br/>
		
	<div class="background">
		<div class="bg-data" id="bg-data">
			<!--img id="bg-image" src="../backgrounds/la.licorne.jpeg" style="width: 100%; height: auto; opacity: 0.5;"-->
			<!--img id="bg-image" src="./cognac.keel.jpg" style="width: 50%; height: auto; opacity: 0.5;"-->
			<img id="bg-image" src="./photos.michel.01/quille.coraxy.jpg" style="width: 100%; height: auto; opacity: 0.5;">
		</div>
	</div>

	<div id="top-container" style="display: grid; grid-template-columns: auto auto;" >
		<div>
			<!--a href="#" onclick="switchLanguage();"><image id="lang-flag" src="./usa.gif" alt="US Flag" title="Switch to English"></image></a-->
		</div>
		<div style="width: 100%; display: flex; justify-content: end;">
			<!--span style="font-style: italic;">Dummy placeholder</span-->
			<div class="switch-container" style="justify-content: end;" title="On or off">
				<label class="switch switch-element">
				<input id="time-bg-slider" type="checkbox" onchange="startBGAnimation(this);">
				<span class="slider round"></span>
				</label>
				<span class="switch-element">Slide show</span>
			</div>
		</div>
	</div>  
	
	<!--h1>Passe-Coque</h1-->
	<div id="current-content" class="text-content">

	</div>
	<div style="width: 100%; position: fixed; bottom: 0; left: 10px; margin-bottom: 10px;">
		<hr/>
		<small style="font-style: italic;">&copy; 2023, Passe-Coque</small>
	</div>

</body>    
<script type="text/javascript">

const DEFAULT_LANG = "FR";
let currentLang = DEFAULT_LANG; // Init value

let showAboutDialog = () => {
    let aboutDialog = document.getElementById("about-dialog");
    if (aboutDialog.show !== undefined) {
      aboutDialog.show();
    } else {
      alert(NO_DIALOG_MESSAGE);
      aboutDialog.style.display = 'inline';
    }
};

let closeAboutDialog = () => {
    let aboutDialog = document.getElementById("about-dialog");
    if (aboutDialog.close !== undefined) {
      aboutDialog.close();
    } else {
      // alert(NO_DIALOG_MESSAGE);
      aboutDialog.style.display = 'none';
    }
};

let clack = (origin) => {
	console.log(`Click on ${origin.innerText}, id ${origin.id}`);

	let contentName = `${origin.id}_${currentLang}.html`;
	let contentPlaceHolder = document.getElementById("current-content");

	fetch(contentName)
            .then(response => {  // Warning... the NOT_FOUND error lands here, apparently.
                console.log(`Data Response: ${response.status} - ${response.statusText}`);
				if (response.status !== 200) { // There is a problem...
					contentPlaceHolder.innerHTML = `Fetching ${contentName}...<br/> Data Response: ${response.status} - ${response.statusText}<br/><b>&Ccedil;a vient...</b>`;
				} else {
					response.text().then(doc => {
						console.log(`Path data loaded, ${doc.length} elements`);
						// Some specific cases here
						if (origin.id === "1") { // Move this higher. No need to load 1_xx.html...
							document.location.reload();
						} else if (origin.id === "23") {
							document.getElementById("dialog-content").innerHTML = doc;
							showAboutDialog();
						} else {
							contentPlaceHolder.innerHTML = doc;
						}
					});
				}
            },
            (error, errmess) => {
                console.log("Ooch");
                let message;
                if (errmess) {
                    let mess = JSON.parse(errmess);
                    if (mess.message) {
                        message = mess.message;
                    }
                }
                console.debug("Failed to get Path data..." + (error ? JSON.stringify(error, null, 2) : ' - ') + ', ' + (message ? message : ' - '));
				// Plus tard...
				contentPlaceHolder.innerHTML = "<b>&Ccedil;a vient...</b>";
            });



}

let updateMenu = () => { // Multilang aspect.
	document.getElementById("1").innerHTML = (currentLang === "FR" ? "Accueil" : "Home");

	document.getElementById("2").innerHTML = (currentLang === "FR" ? "Qui sommes-nous&nbsp;?" : "Who we are");
	document.getElementById("21").innerHTML = (currentLang === "FR" ? "Passe-Coque, c'est quoi&nbsp;?" : "Passe-Coque, what's that?");
	document.getElementById("22").innerHTML = (currentLang === "FR" ? "Notre &eacute;quipe" : "Our team");
	document.getElementById("23").innerHTML = (currentLang === "FR" ? "L'association" : "The association");
	document.getElementById("24").innerHTML = (currentLang === "FR" ? "La SCIC : Eco-village Nautique" : "The SCIC: Nautical Eco-village");

	document.getElementById("3").innerHTML = (currentLang === "FR" ? "Nos actions" : "Our actions");
	document.getElementById("31").innerHTML = (currentLang === "FR" ? "Transmettre" : "Transmit");
	document.getElementById("32").innerHTML = (currentLang === "FR" ? "R&eacute;nover" : "Refit");
	document.getElementById("33").innerHTML = (currentLang === "FR" ? "Partager" : "Share");
	document.getElementById("34").innerHTML = (currentLang === "FR" ? "Nos formations" : "Our trainings");
	document.getElementById("35").innerHTML = (currentLang === "FR" ? "Associations partenaires" : "Partner associations");

	document.getElementById("4").innerHTML = (currentLang === "FR" ? "La flotte" : "The fleet");
	document.getElementById("41").innerHTML = (currentLang === "FR" ? "Les bateaux" : "The boats");
	document.getElementById("42").innerHTML = (currentLang === "FR" ? "Les projets" : "The projects");
	document.getElementById("43").innerHTML = (currentLang === "FR" ? "Le boat-club" : "The boat-club");

	document.getElementById("5").innerHTML = (currentLang === "FR" ? "Nous rejoindre" : "Join us");
	document.getElementById("51").innerHTML = (currentLang === "FR" ? "Faire un don" : "Make a gift");
	document.getElementById("52").innerHTML = (currentLang === "FR" ? "Inverstir dans la SCIC" : "Invest in the SCIC");
	document.getElementById("53").innerHTML = (currentLang === "FR" ? "Votre projet associatif" : "Your association project");

	document.getElementById("6").innerHTML = (currentLang === "FR" ? "En savoir plus" : "Know more");
	document.getElementById("61").innerHTML = (currentLang === "FR" ? "Contact" : "Contact");
	document.getElementById("62").innerHTML = (currentLang === "FR" ? "Actualit&eacute;" : "News");
	document.getElementById("63").innerHTML = (currentLang === "FR" ? "Visiter le chantier" : "Visit the shipyard");
	document.getElementById("64").innerHTML = (currentLang === "FR" ? "Partenaires" : "Partners");
};

let switchLanguage = () => {
	let flagElement = document.getElementById("lang-flag");
	if (currentLang === "FR") { // Then switch to EN
		flagElement.src = "./france.gif";
		flagElement.alt = "Drapeau français";
		flagElement.title = "En français";
		currentLang = "EN";
	} else {
		flagElement.src = "us_uk_flag.png"; // "./usa.gif";
		flagElement.alt = "US Flag";
		flagElement.title = "Switch to English";
		currentLang = "FR";
	}
	// Le reste...
	updateMenu();
};

const BG_IMAGES = 
/*[
	"../backgrounds/la.licorne.jpeg",
	"../backgrounds/next_wave.jpg"
];*/

[ "jeff.01/DSCF2058.jpg",        "jeff.01/IMG_0319.jpg",        "jeff.01/IMG_6647.jpg",        "jeff.01/IMG_8100.jpg",       "jeff.01/P1010473.jpg",
  "jeff.01/DSC_0519.jpg",        "jeff.01/IMG_0336.jpg",        "jeff.01/IMG_6662.jpg",        "jeff.01/IMG_9441.jpg",
  "jeff.01/IMG_0207.jpg",        "jeff.01/IMG_0486.jpg",        "jeff.01/IMG_6663.jpg",        "jeff.01/IMG_9893.jpg",
  "jeff.01/IMG_0218.jpg",        "jeff.01/IMG_1082.jpg",        "jeff.01/IMG_8034.jpg",        "jeff.01/P1000587.jpg" ];

const BG_INTERVAL = 3000; // in ms

let current_bg_image_index = 0;
let bgAnimation;

let startBGAnimation = (cb) => {
	if (cb) {
		if (!cb.checked) {
			clearInterval(bgAnimation);
			bgAnimation = null;
		} else {
			bgAnimation = setInterval(() => {
				current_bg_image_index += 1;
				if (current_bg_image_index >= BG_IMAGES.length) {
					current_bg_image_index = 0;
				}
				document.getElementById("bg-image").src = BG_IMAGES[current_bg_image_index];
			}, BG_INTERVAL); // in ms.
		}
	} else { // Previous behavior
		if (bgAnimation !== undefined) {
		clearInterval(bgAnimation);
		}
		// setTimeout(darkenBackground, 1);
		bgAnimation = setInterval(() => {
			current_bg_image_index += 1;
			if (current_bg_image_index >= BG_IMAGES.length) {
				current_bg_image_index = 0;
			}
			document.getElementById("bg-image").src = BG_IMAGES[current_bg_image_index];
		}, BG_INTERVAL); // in ms.
	}
};

window.onload = () => {
	console.log("Loaded !");
	// startBGAnimation();
};

</script>

</html>
