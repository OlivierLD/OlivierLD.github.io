<!DOCTYPE html>
<html lang="fr">
<!-- 
	Warning: This page must NOT contain any language sensitive data !!!

	Designed by Jeff
	Coded by Oliv
-->
<head>
	<meta charset="UTF-8">
	<title>Passe&#8209;Coque</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!--link rel="icon" type="image/png" href="./infinity.png"-->
	<link rel="icon" type="image/png" href="./logos/LOGO_PC_no_txt.png">
	<!--link rel="stylesheet" href="../css/stylesheet.css" type="text/css"/-->
	<link rel="stylesheet" href="./fonts/font.01.css">
	<link rel="stylesheet" href="./fonts/font.02.css">

	<link rel="stylesheet" href="./passe-coque.menu.css">
	<link rel="stylesheet" href="./passe-coque.css" type="text/css"/>
	<style type="text/css">
		/* Empty */
    </style>
	<script type="text/javascript" src="./qrcode.js"></script>
	<script type="text/javascript" src="./passe-coque.js"></script>

	<script type="module" src="./webcomponents/SlideShow.js"></script>
</head>
	
<body>

<dialog id="about-dialog" class="shadow-menu pcc-dialog" style="display: none;"> <!-- z-index: 10; display: none; <= Safari cell phone TODO Make sure it shows up.... -->
	<div class="dialog-header">
		<span><!-- Empty title --></span>
		<span class="dialog-header-close" onclick="closeAboutDialog();">&times</span>
	</div>
	<div id="dialog-content">
		<!-- Content goes here -->
		Dummy Content
	</div>
</dialog>

<dialog id="custom-alert" class="shadow-menu pcc-dialog" style="border: 2px solid cyan; margin-top: 50px; display: none;"> <!-- display: none <- Safari...-->
    <div class="dialog-header">
      <span>Message</span>
      <span class="dialog-header-close" onclick="closeCustomAlert();">&times</span>
    </div>
    <div id="custom-alert-content">
      <!-- Dynamic alert content -->
    </div>
</dialog>

	<!--
		** Structure du menu **
		▼ = &#9660;
		- Accueil         - 1
		- Qui sommes nous - 2
			- Passe-Coque, c'est quoi ?        21
			- Notre equipe                     22
			- Projet : Eco-village Nautique    23
		- Nos actions     - 3
			- Transmettre                      31
			- Renover                          32
			- Partager                         33
		- La flotte      - 4
		- Nous soutenir  - 5
			- Adherer                          51
			- Faire un don                     52
			- Investir dans l'Eco-Village      53
		- En savoir plus - 6
			- Contact                          61
			- Actualite                        62
			- On parle de nous / presse        63
			- Boutique                         64
			- Partenaires                      65
			- Chart PCC                        66
	-->
	<div id="nav-menu" class="scrolling-menu" style="margin-left: -8px;">
		<div style="float: left; display: grid; grid-template-columns: auto auto;">
			<div>
				<!--a href="javascript:void(0)" onclick="clack(this);" id="_1"><image src="./logo.passe-coque.png" style="width: 48px; padding: 14px 10px;" title="Passe&#8209;Coque"/></a-->
				<!--a href="javascript:void(0)" onclick="clack(this);" id="_1" style="text-decoration: none;"><img src="./logo.only.png" style="width: 80px; padding: 0px 20px;" title="Passe&#8209;Coque"/></a-->
				<!--a href="javascript:void(0)" onclick="clack(this);" id="_1" style="text-decoration: none;"><img src="./logos/LOGO_PC_rvb.png" style="height: 80px; padding: 0px 20px;" title="Passe&#8209;Coque"/></a-->
				<!--a href="javascript:void(0)" onclick="clack(this);" id="_1" style="text-decoration: none;"><img src="./logos/LOGO_PC_no_txt.png" style="height: 80px; padding: 0px 20px;" title="Passe&#8209;Coque"/></a-->
				<a href="javascript:void(0)" onclick="clack(this);" id="_1" style="text-decoration: none;"><img src="./logos/logo.02.png" style="height: 80px; padding: 0px 20px;" title="Passe&#8209;Coque"/></a>
			</div>
			<div style="height: 100%; padding: 20px 0px;">
				<!--span style="font-weight: bold;">Passe&#8209;Coque</span-->
				<img src="./logos/LOGO_PC_txt_only.png" style="height: 38px; margin: 4px 0 -2px 0;" title="Passe&#8209;Coque"/>
			</div>
		</div>
		<div style="/*margin-left: -50px; float: right;*/ margin-right: 20px;">  <!-- Touchy ! (Tablets, etc) -->
			<ul id="navigation" style="display: grid; grid-template-columns: auto auto auto auto auto auto 80px; width: fit-content;"> <!-- Columns must match the menu below... -->
				<li>
					<a href="javascript:void(0)" onclick="clack(this);" id="_1"><span id="home-label">Accueil</span></a>
					<!--ul>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_11">QR Code</a></li>
					</ul-->
				</li>
				<li>
					<a href="javascript:void(0)" id="_2" onclick="clack('_21');">Qui sommes-nous&nbsp;?&nbsp;</a>
					<ul>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_21">Passe&#8209;Coque, c'est quoi&nbsp;?</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_22">Notre &eacute;quipe</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_23">Projet : Eco-village Nautique</a></li>
						<!--li>
							<a href="javascript:void(0)">Service 3 &raquo;</a>
							<ul>
								<li><a href="javascript:void(0)" onclick="clack(this);">SubMenu 1</a></li>
								<li><a href="javascript:void(0)" onclick="clack(this);">SubMenu 2</a></li>
								<li><a href="javascript:void(0)" onclick="clack(this);">SubMenu 3</a></li>
								<li><a href="javascript:void(0)" onclick="clack(this);">SubMenu 4</a></li>
							</ul>					
						</li-->					
						<!--li><a href="javascript:void(0)" onclick="clack(this);">Service 4</a></li-->
					</ul>
				</li>
				<li>
					<a href="javascript:void(0)" id="_3">Nos actions&nbsp;</a>
					<ul>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_31">Transmettre - <i style="font-style: italic;">Les projets</i></a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_32">R&eacute;nover - <i style="font-style: italic;">Le chantier</i></a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_33">Partager - <i style="font-style: italic;">Le club</i></a></li>
						<!--li><a href="javascript:void(0)" onclick="clack(this);" id="_34">Formations</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_35">Partenaires</a></li-->
					</ul>
				</li>
				<li>
					<a href="javascript:void(0)" onclick="clack(this);" id="_4">La flotte&nbsp;</a>
					<!--ul>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_41">Les bateaux</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_42">Les projets &agrave; saisir</a></li>
					</ul-->
				</li>
				<li>
					<a href="javascript:void(0)" id="_5">Nous soutenir&nbsp;</a>
					<ul>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_51">Adh&eacute;rer</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_52">Faire un don</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_53">Investir dans l'Eco-Village</a></li>
					</ul>
				</li>
				<li>
					<a href="javascript:void(0)" id="_6">En savoir plus&nbsp;</a>
					<ul>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_61">Contact</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_62">Actualit&eacute;</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_63">On parle de nous / Presse</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_64">La boutique</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_65">Partenaires</a></li>
						<li><a href="javascript:void(0)" onclick="clack(this);" id="_66">Charte PCC</a></li>
					</ul>
				</li>
				<li><a href="javascript:void(0)" onclick="switchLanguage();"><image id="lang-flag" src="./us_uk_flag.png" alt="US/UK Flag" title="Switch to English" style="width: 27px;"></image></a></li>
			</ul>
		</div>
	</div>

	<br/>

	  <!--
    The Big Main Sliding Menu on the left, for small devices.

    ◄ = &#9668;
    ► = &#9658;
    ▼ = &#9660;
    ▲ = &#9650;
        -->
	<div id="side-menu" class="hamburger-menu">
		<!--h1 style="width: 100%;"><span id="hamburger" style="cursor: pointer;" onclick="openNav()" onmouseover="openNav()" title="Hamburger">&nbsp; &#8801;</span> <span id="my-name">Passe&#8209;Coque </span></h1-->
		<div style="display: grid; grid-template-columns: auto auto;">
			<div style="margin-top: 0px;">
				<!--h1 id="my-name" style="margin-top: 50px; font-size: 3em;">Passe&#8209;Coque </h1-->
				<!--img src="./logos/LOGO_PC_no_txt.png" style="width: 50px; margin-top: -40px; margin-left: -30px;" title="Passe&#8209;Coque"/-->
				<a href="javascript:void(0)" onclick="clack(this);" id="_1" style="text-decoration: none;"><img src="./logos/logo.02.png" style="width: 50px;" title="Passe&#8209;Coque"/></a>
				<img src="./logos/LOGO_PC_txt_only.png" style="width: 100px;" title="Passe&#8209;Coque"/>
			</div>
			<a id="hamburger" style="cursor: pointer;" onclick="openNav();" title="Hamburger Menu"> <!-- onmouseover="openNav();" <= onmouseover (si present avec onclick) fout la merde sur cell-phones et tablettes -->
				<span style="color: #16696d; font-size: 2em; float: right; margin-right: 20px; margin-top: 18px;">Menu&nbsp;&#8801;</span>
			</a>
		</div>
		<!--h1 style="width: 100%;"><span id="hamburger" style="cursor: pointer;" onclick="openNav()" onmouseover="openNav()" title="Hamburger">&nbsp; <img src="./logo.transp.png" style="width: 48px; padding: 14px 10px;" title="Passe&#8209;Coque"/></span> <span id="my-name">Passe&#8209;Coque </span></h1-->
		
		<div id="side-nav" class="sidenav" onmouseleave="closeNav()"> <!-- Restored... -->
			<div style="width: 100%; display: grid; grid-template-columns: auto auto;">
				<a href="javascript:void(0)" class="active-link switch-lang" style="text-align: left;" onclick="switchLanguage()"><image id="lang-flag" src="./us_uk_flag.png" alt="US/UK Flag" title="Switch to English" style="width: 27px;"></image></a>
				<a href="javascript:void(0)" id="close-nav-button" class="closebtn" onclick="closeNav();">&times;</a>
			</div>

			<a href="javascript:void(0)" class="active-link" style="margin-top: 10px;" onclick="clack(this); closeNav();" id="_1"><span id="home-label"> Accueil</span></a>

			<div> 
				<a href="javascript:void(0)" onclick="showHideSection(this, 'section-1'); clack('_21');"><span class="expand-collapse">&#9658;&nbsp;</span><span id="_2">Qui sommes-nous ?</span></a>
				<div id="section-1" class="sub-section">
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_21">Passe&#8209;Coque, c'est quoi ?</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_22">Notre &eacute;quipe</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_23">Projet : Eco-village Nautique</a>
				</div>
			</div>
			<div>
				<a href="javascript:void(0)" onclick="showHideSection(this, 'section-2');"><span class="expand-collapse">&#9658;&nbsp;</span><span id="_3">Nos actions</span></a>
				<div id="section-2" class="sub-section">
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_31">Transmettre - <i>Les projets</i></a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_32">R&eacute;nover - <i>Le chantier</i></a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_33">Partager - <i>Le Club</i></a>
					<!--a class="active-link" href="javascript:void(0)" onclick="clack(this);" id="_34">Formations</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this);" id="_35">Partenaires</a-->
				</div>
			</div>

			<div>
				<a href="javascript:void(0)" class="active-link" style="margin-top: 10px;" onclick="clack(this); closeNav();" id="_4">La flotte</a>
				<!--a href="javascript:void(0)" onclick="showHideSection(this, 'section-3');"><span class="expand-collapse">&#9658;&nbsp;</span><span id="_4">La flotte</span></a>
				<div id="section-3" class="sub-section">
					<a class="active-link" href="javascript:void(0)" onclick="clack(this);" id="_41">Les bateaux</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this);" id="_42">Les projets &agrave; saisir</a>
				</div-->
			</div>

			<div>
				<a href="javascript:void(0)" onclick="showHideSection(this, 'section-4');"><span class="expand-collapse">&#9658;&nbsp;</span><span id="_5">Nous soutenir</span></a>
				<div id="section-4" class="sub-section">
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_51">Adh&eacute;rer</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_52">Faire un don</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_53">Investir dans l'Eco-Village</a>
				</div>
			</div>

			<div>
				<a href="javascript:void(0)" onclick="showHideSection(this, 'section-5');"><span class="expand-collapse">&#9658;&nbsp;</span><span id="_6">En savoir plus</span></a>
				<div id="section-5" class="sub-section">
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_61">Contact</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_62">Actualit&eacute;</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_63">On parle de nous / Presse</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_64">La Boutique</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_65">Partenaires</a>
					<a class="active-link" href="javascript:void(0)" onclick="clack(this); closeNav();" id="_66">Charte PCC</a>
				</div>
			</div>

		</div>
	</div>

	<div style="display: none; border: 3px solid navy; border-radius: 5px;">
		<div id="top-container" style="display: grid; grid-template-columns: auto auto;" >
			<div>
				<!--a href="javascript:void(0)" onclick="switchLanguage();"><image id="lang-flag" src="./usa.gif" alt="US Flag" title="Switch to English"></image></a-->
			</div>
			<div style="width: 100%; display: flex; justify-content: end;">
				<!--span style="font-style: italic;">Dummy placeholder</span-->
				<div class="switch-container" style="justify-content: end;" title="On or off">
					<label class="switch switch-element">
					<input id="time-bg-slider" type="checkbox" onchange="startBGAnimation(this);">
					<span class="slider round"></span>
					</label>
					<span class="switch-element">Slide show</span>
				</div>
			</div>
		</div>  
	</div>
	
	<div id="qrcode" style="display:none; width:250px; height:250px; margin:25px;">
		<!-- Not used for now -->
	</div>

	<div id="current-content" class="text-content" style="margin-left: -8px;">
		<!-- Everything, content goes here -->
	</div>

	<!--div style="width: 100%; position: fixed; bottom: 0; left: 10px; margin-bottom: 10px;">
		<hr/>
		<small style="font-style: italic;">&copy; 2023, Passe&#8209;Coque</small>
	</div-->
	<div style="width: 100%; position: fixed; bottom: 0; left: 0; background: rgba(0, 0, 0, 0.85);">
		<div>
			<small style="padding-left: 10px; font-style: italic; color: white;">&copy; 2024, Passe&#8209;Coque</small>
		</div>
	</div>


</body>    
<script type="text/javascript">


window.onload = () => {
	console.log("Loaded!");
	console.log(`${window.location.href} loaded !`);

	// Increment view counter, keep trach, etc
	function requestLogger(appCodeName, appName, product, appVersion, language,
					       platform, userAgent, latitude, longitude) {
		fetch("./php/nbViews.php", {
			method: "POST",
			body: JSON.stringify({
				appCodeName: appCodeName, 
				appName: appName, 
				product: product, 
				appVersion: appVersion, 
				language: language,
				platform: platform, 
				userAgent: userAgent, 
				latitude: latitude, 
				longitude: longitude
			}),
			headers: {
				"Content-type": "application/json; charset=UTF-8"
			}
		}).then(response => {
			console.log(`Received from PHP: \nResponse Status:${response.status}`);
			// Assumimg this is text (not json, or what not)
			response.text().then(data => {
				console.log(`Content: ${data}`);
			});
		},
		(error, errmess) => {
			console.log("RequestLogger: Ooch");
			let message;
			if (errmess) {
				let mess = JSON.parse(errmess);
				if (mess.message) {
					message = mess.message;
				}
			}
			console.debug("Failed to get to the nbViews.php..." + (error ? JSON.stringify(error, null, 2) : ' - ') + ', ' + (message ? message : ' - '));
		});
	}
	// For tests, or further use...
	console.log(`AppCodeName: ${navigator.appCodeName}\n
	Browser Name: ${navigator.appName}\n
	Product: ${navigator.product}\n
	Browser Name: ${navigator.appName}\n
	Browser Version: ${navigator.appVersion}\n
	Cookies Enabled: ${navigator.cookieEnabled}\n
	Browser Language: ${navigator.language}\n
	Browser Online: ${navigator.onLine}\n
	Platform: ${navigator.platform}\n
	User-agent header: ${navigator.userAgent}`);
	navigator.geolocation.getCurrentPosition(pos => {
		console.log(`Invoked from Lat: ${pos.coords.latitude}, Lng: ${pos.coords.longitude}`);
		requestLogger(navigator.appCodeName,
					  navigator.appName,
					  navigator.product,
					  navigator.appVersion,
					  navigator.language,
					  navigator.platform,
					  navigator.userAgent,
					  pos.coords.latitude,
					  pos.coords.longitude);
	}, err => {
		console.log(`Error: ${JSON.stringify(err)}`);
		requestLogger(navigator.appCodeName,
					  navigator.appName,
					  navigator.product,
					  navigator.appVersion,
					  navigator.language,
					  navigator.platform,
					  navigator.userAgent,
					  null,
					  null);

	});

	window.translate = translate;

	qrcode = new QRCode(document.getElementById("qrcode"), {
		width:  250,
		height: 250
	});

	// makeCode(); // On request only

	// debugger;
	startBGAnimation();

	console.log(`Width: ${window.innerWidth}, Height: ${window.innerHeight}`);
	let cellPhoneUI = false;

	if (window.innerWidth < 1000 || window.innerHeight < 500) {
		cellPhoneUI = true;
		// console.log(`Redirecting from Location : ${window.location}`);
		// let redirected;
		// if (window.location.href.includes('index.html')) {
		// 	redirected = window.location.href.replace('index.html', 'index.2.html');
		// } else {
		// 	if (window.location.href.endsWith('/')) {
		// 		redirected = window.location.href + 'index.2.html';
		// 	} else {
		// 		redirected = window.location.href + '/index.2.html';
		// 	}
		// }
		// window.location.href = redirected;
	}
	// let navMenu = document.getElementById('nav-menu');
	// let sideBar = document.getElementById('side-menu');

	// if (cellPhoneUI) {
	// 	navMenu.style.display = 'none';
	// 	sideBar.style.display = 'block';
	// } else {
	// 	navMenu.style.display = 'block';
	// 	sideBar.style.display = 'none';
	// }

	let userLang = getQueryParameterByName('lang');
	if (userLang && userLang === 'EN') {
		switchLanguage();
	}
	// TODO Maybe some day other QS prms...
	let qsLang = getQSPrm('lang');
	if (qsLang) {
		if (qsLang === 'EN' || qsLang === 'FR') {
			currentLang = qsLang;
		} else {
			console.log(`Unmanaged lang is query string: ${qsLang}`);
		}
	}

	// Load Home Page
	let el = document.createElement("div");
	el.id = "_1";
	clack(el);
};

</script>

</html>
