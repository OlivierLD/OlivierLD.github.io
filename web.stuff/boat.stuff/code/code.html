<!DOCTYPE html>
<html lang="en">

<!--
 | Translates a string entered by the user into
 | 	- International Signal Code
 |  - Morse Code
 +-->
<head>
	<title>International Code</title>
</head>
<script type="text/javascript">
	const LOREM_IPSUM = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere purus quis lorem bibendum blandit. Integer non tellus lobortis, ullamcorper justo sit amet, semper enim. Vivamus sapien metus, efficitur at tincidunt vitae, faucibus imperdiet massa. Etiam porta est nec felis aliquet, sed bibendum tortor scelerisque. Suspendisse euismod, erat et mollis bibendum, arcu metus tempus felis, sit amet tempor nibh dolor at orci. Suspendisse tempus orci sed dui sollicitudin tempus ut vitae elit. Praesent a suscipit metus.";

	const MORSE_CODE = [
		{ letter: 'A', morse: ". -" },     // Allo
		{ letter: 'B', morse: "- . . ." }, // Bombardement
		{ letter: 'C', morse: "- . - ." }, // Compte Goutte
		{ letter: 'D', morse: "- . ." },   // Domaine
		{ letter: 'E', morse: "." },       // Eh!
		{ letter: 'F', morse: ". . - ." }, // Fanfaronne
		{ letter: 'G', morse: "- - ." },   // Gloutonne
		{ letter: 'H', morse: ". . . ." }, // Heureusement
		{ letter: 'I', morse: ". ." },     // Ile
		{ letter: 'J', morse: ". - - -" }, // J'ai mon loto
		{ letter: 'K', morse: "- . -" },   // Kohinor
		{ letter: 'L', morse: ". - . ." }, // Linotype
		{ letter: 'M', morse: "- -" },     // Moto
		{ letter: 'N', morse: "- ." },     // Note
		{ letter: 'O', morse: "- - -" },   // Oloron
		{ letter: 'P', morse: ". - - ." }, // Pyrophore
		{ letter: 'Q', morse: "- - . -" }, // Quocorico <- trick
		{ letter: 'R', morse: ". - ." },   // Raisonne
		{ letter: 'S', morse: ". . ." },   // Salade
		{ letter: 'T', morse: "-" },       // Top
		{ letter: 'U', morse: ". . -" },   // Unisson
		{ letter: 'V', morse: ". . . -" }, // Vegetation
		{ letter: 'W', morse: ". - -" },   // Wagon long
		{ letter: 'X', morse: "- . . -" }, // Xochimilco
		{ letter: 'Y', morse: "- . - -" }, // Yotcheoufou
		{ letter: 'Z', morse: "- - . ." }, // Zoroastre
		// Digits
		{ letter: '1', morse: ". - - - -" },
		{ letter: '2', morse: ". . - - -" },
		{ letter: '3', morse: ". . . - -" },
		{ letter: '4', morse: ". . . . -" },
		{ letter: '5', morse: ". . . . ." },
		{ letter: '6', morse: "- . . . ." },
		{ letter: '7', morse: "- - . . ." },
		{ letter: '8', morse: "- - - . ." },
		{ letter: '9', morse: "- - - - ." },
		{ letter: '0', morse: "- - - - -" }
	];

	function findMorse(letter) {
		let morse = "";
		for (let i=0; i<MORSE_CODE.length; i++) {
			if (MORSE_CODE[i].letter === letter) {
				morse = MORSE_CODE[i].morse;
				break;
			}
		}
		return morse;
	}

	function loremIpsum() {
		document.getElementById('original-text').value = LOREM_IPSUM;
	}

	function codeTranslate(str) {

		document.getElementById('translated').innerHTML = '';
		let translationContent = '';

		for (i = 0; i < str.length; i++) {
			// NL can happen, when text to translate is DnDropped...
			if (str.charAt(i) != " " && str.charAt(i) != "\n") {
				let letter =  str.charAt(i).toUpperCase(); 
				let title = "";
				let morse = "";
				let aBlank = false;
				let cr = false;
				switch (letter) {
					case '\n':      // Redundant?
						cr = true;
						title = "";
						break;
					case 'A':
					case 'À':
					case 'Á':
					case 'Â':
					case 'Ã':
					case 'Ä':
					case 'Å':
					case 'Æ':
						letter = 'A';
						title = 'Alfa';
						break;
					case 'B':
						title = 'Bravo';
						break;
					case 'C':
					case 'Ç':
						letter = 'C';
						title = 'Charlie';
						break;
					case 'Ð':
					case 'D':
						letter = 'D';
						title = 'Delta';
						break;
					case 'È':
					case 'É':
					case 'Ê':
					case 'Ë':
					case 'E':
						letter = 'E';
						title = 'Echo';
						break;
					case 'F':
						title = 'Foxtrott';
						break;
					case 'G':
						title = 'Golf';
						break;
					case 'H':
						title = 'Hotel';
						break;
					case 'Ì':
					case 'Í':
					case 'Î':
					case 'Ï':
					case 'I':
						letter = 'I';
						title = 'India';
						break;
					case 'J':
						title = 'Juliet';
						break;
					case 'K':
						title = 'Kilo';
						break;
					case 'L':
						title = 'Lima';
						break;
					case 'M':
						title = 'Mike';
						break;
					case 'Ñ':
					case 'N':
						letter = 'N';
						title = 'November';
						break;
					case 'Ò':
					case 'Œ':
					case 'Ó':
					case 'Ô':
					case 'Õ':
					case 'Ö':
					case 'Ø':
					case 'O':
						letter = 'O';
						title = 'Oscar';
						break;
					case 'P':
						title = 'Papa';
						break;
					case 'Q':
						title = 'Quebec';
						break;
					case 'R':
						title = 'Romeo';
						break;
					case 'Š':
					case 'S':
						letter = 'S';
						title = 'Sierra';
						break;
					case 'T':
						title = 'Tango';
						break;
					case 'Ù':
					case 'Ú':
					case 'Û':
					case 'Ü':
					case 'U':
						letter = 'U';
						title = 'Uniform';
						break;
					case 'V':
						title = 'Victor';
						break;
					case 'W':
						title = 'Whiskey';
						break;
					case 'X':
						title = 'X-Ray';
						break;
					case 'Ý':
					case 'Ÿ':
					case 'Y':
						letter = 'Y';
						title = 'Yankee';
						break;
					case 'Ž':
					case 'Z':
						letter = 'Z';
						title = 'Zulu';
						break;
					case '0':
						title = 'Nadazero';
						break;
					case '1':
						title = 'Unaone';
						break;
					case '2':
						title = 'Bissotwo';
						break;
					case '3':
						title = 'Terathree';
						break;
					case '4':
						title = 'Quartafour';
						break;
					case '5':
						title = 'Pentafive';
						break;
					case '6':
						title = 'Soxisix';
						break;
					case '7':
						title = 'Setaseven';
						break;
					case '8':
						title = 'Octoeight';
						break;
					case '9':
						title = 'Novenine';
						break;
					default:
						aBlank = true;
						title = "";
						break;
				}
				morse = findMorse(letter).replaceAll('.', '&middot;');

				if (!aBlank) {
					if (document.getElementById('translation-type').checked) {
						translationContent += `<b>${morse}</b>&nbsp;&nbsp;&nbsp;`;
					} else {
						let imgName = letter.toLowerCase() + ".gif";
						translationContent += (`<img src="${imgName}" alt="${letter}" title="${title}">&nbsp;`);
					}
				} else {
					translationContent += ('&nbsp;');
				}
			} else {
				translationContent += ('<br>'); // A break for each blank
			}
		}
		document.getElementById('translated').innerHTML = translationContent;
	}

	function getPrm(prmName) {
		let loc = document.location.toString();
		let i = loc.indexOf(prmName + "=");
		let value = '';
		if (i > -1) {
			let str = loc.substr((prmName.length + 1) + i);
			let j = str.indexOf('&');
			if (j > -1) {
				value = str.substr(0, j);
			} else {
				value = str;
			}
		}
		//alert(prmName + " = " + value);    
		return value;
	}

	function checkQS() {
		let qs = getPrm("txt");
		if (qs != null && qs.length > 0) {
			codeTranslate(unescape(qs));
		}
	}
</script>

<style type="text/css">
	body {
		font-family: 'Courier New', Courier, monospace;
		font-weight: bold;
		color: navy;
	}

	.translation {
		background-color: silver; 
		margin: 14px;
		padding: 5px; 
		margin-top: 5px; 
		border-radius: 3px;
	}

	button {
		padding: 4px 20px;
		/* give the background a gradient */
		background: #ffae00; /* fallback for browsers that don't support gradients */
		background: -webkit-linear-gradient(top, #ffae00, #d67600);
		background: -moz-linear-gradient(top, #ffae00, #d67600);
		background: -o-linear-gradient(top, #ffae00, #d67600);
		background: linear-gradient(top, #ffae00, #d67600);
		border: 2px outset #dad9d8;
		/* style the text */
		font-family: Lato, Verdana, Andika, Arial, sans-serif; /* Andkia is available at http://www.google.com/webfonts/specimen/Andika */
		font-size: 0.8em;
		letter-spacing: 0.05em;
		text-transform: uppercase;
		color: #fff;
		text-shadow: 0 1px 10px #000;
		/* add to small curve to the corners of the button */
		-webkit-border-radius: 15px;
		-moz-border-radius: 15px;
		border-radius: 15px;
		/* give the button a drop shadow */
		-webkit-box-shadow: rgba(0, 0, 0, .55) 0 1px 6px;
		-moz-box-shadow: rgba(0, 0, 0, .55) 0 1px 6px;
		box-shadow: rgba(0, 0, 0, .55) 0 1px 6px;
	}

	/* NOW STYLE THE BUTTON'S HOVER STATE */
	button:hover, button:focus {
		border: 2px solid #dad9d8;
	}
</style>

<!--body background="bground.jpg" onLoad="checkQS();"-->
<body onLoad="checkQS();">
	<h1>International Code of Signals</h1>
	<div style="text-align: left;">
		Enter a text below and hit the Translate button. 
		<input type="checkbox" id="translation-type">In Morse
		<br/>
		<div  style="margin: 10px; padding: 10px;">
			<a href="#" onclick="loremIpsum();" title="If you're lazy...">Lorem Ipsum...</a>
		</div>
		<br>
		<textarea id="original-text" 
		          placeholder="Text to translate goes here" 
				  spellcheck="false" 
				  cols="120" 
				  rows="5" 
				  style="border-radius: 5px; border: 2px solid blue; padding: 10px; font-size: 16px;"></textarea>
		<br><br>
		<button onClick="codeTranslate(document.getElementById('original-text').value);" style="margin-bottom: 10px;">Translate</button>
	</div>
	<div id="translated" class="translation" style="border-radius: 5px; border: 2px solid red; padding: 10px;">Translation will show here...</div>
	<hr>
	<address>&copy; 2001, 2021 and beyond, Oliv Cool Stuff Soft Strikes Again</address>
</body>

</html>