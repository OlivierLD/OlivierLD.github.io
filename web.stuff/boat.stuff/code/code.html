<!DOCTYPE html>
<html lang="en">

<head>
	<title>International Code</title>
</head>
<script type="text/javascript">
	const LOREM_IPSUM = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere purus quis lorem bibendum blandit. Integer non tellus lobortis, ullamcorper justo sit amet, semper enim. Vivamus sapien metus, efficitur at tincidunt vitae, faucibus imperdiet massa. Etiam porta est nec felis aliquet, sed bibendum tortor scelerisque. Suspendisse euismod, erat et mollis bibendum, arcu metus tempus felis, sit amet tempor nibh dolor at orci. Suspendisse tempus orci sed dui sollicitudin tempus ut vitae elit. Praesent a suscipit metus.";

	const MORSE_CODE = [
		{ letter: 'A', morse: ". _" },     // Allo
		{ letter: 'B', morse: "_ . . ." }, // Bombardement
		{ letter: 'C', morse: "_ . _ ." }, // Compte Goutte
		{ letter: 'D', morse: "_ . ." },   // Domaine
		{ letter: 'E', morse: "." },       // Eh!
		{ letter: 'F', morse: ". . _ ." }, // Fanfaronne
		{ letter: 'G', morse: "_ _ ." },   // Gloutonne
		{ letter: 'H', morse: ". . . ." }, // Heureusement
		{ letter: 'I', morse: ". ." },     // Ile
		{ letter: 'J', morse: ". _ _ _" }, // J'ai mon loto
		{ letter: 'K', morse: "_ . _" },   // Kohinor
		{ letter: 'L', morse: ". _ . ." }, // Linotype
		{ letter: 'M', morse: "_ _" },     // Moto
		{ letter: 'N', morse: "_ ." },     // Note
		{ letter: 'O', morse: "_ _ _" },   // Oloron
		{ letter: 'P', morse: ". _ _ ." }, // Pyrophore
		{ letter: 'Q', morse: "_ _ . _" }, // Quocorico <- trick
		{ letter: 'R', morse: ". _ ." },   // Raisonne
		{ letter: 'S', morse: ". . ." },   // Salade
		{ letter: 'T', morse: "_" },       // Top
		{ letter: 'U', morse: ". . _" },   // Unisson
		{ letter: 'V', morse: ". . . _" }, // Vegetation
		{ letter: 'W', morse: ". _ _" },   // Wagon long
		{ letter: 'X', morse: "_ . . _" }, // Xochimilco
		{ letter: 'Y', morse: "_ . _ _" }, // Yotcheoufou
		{ letter: 'Z', morse: "_ _ . ." }, // Zoroastre
		// Digits
		{ letter: '1', morse: ". _ _ _ _" },
		{ letter: '2', morse: ". . _ _ _" },
		{ letter: '3', morse: ". . . _ _" },
		{ letter: '4', morse: ". . . . _" },
		{ letter: '5', morse: ". . . . ." },
		{ letter: '6', morse: "- . . . ." },
		{ letter: '7', morse: "_ _ . . ." },
		{ letter: '8', morse: "_ _ _ . ." },
		{ letter: '9', morse: "_ _ _ _ ." },
		{ letter: '0', morse: "_ _ _ _ _" }
	];

	function findMorse(letter) {
		let morse = "";
		for (let i=0; i<MORSE_CODE.length; i++) {
			if (MORSE_CODE[i].letter === letter) {
				morse = MORSE_CODE[i].morse;
				break;
			}
		}
		return morse;
	}

	function loremIpsum() {
		document.getElementById('original-text').value = LOREM_IPSUM;
	}

	function codeTranslate(str) {

		document.getElementById('translated').innerHTML = '';
		let translationContent = '';

		for (i = 0; i < str.length; i++) {
			// NL can happen, when text to translate is DnDropped...
			if (str.charAt(i) != " " && str.charAt(i) != "\n") {
				let letter =  str.charAt(i).toUpperCase(); 
				let title = "";
				let morse = "";
				let aBlank = false;
				let cr = false;
				switch (letter) {
					case '\n':      // Redundant?
						cr = true;
						title = "";
						break;
					case 'A':
					case 'À':
					case 'Á':
					case 'Â':
					case 'Ã':
					case 'Ä':
					case 'Å':
					case 'Æ':
						letter = 'A';
						title = 'Alfa';
						break;
					case 'B':
						title = 'Bravo';
						break;
					case 'C':
					case 'Ç':
						letter = 'C';
						title = 'Charlie';
						break;
					case 'Ð':
					case 'D':
						letter = 'D';
						title = 'Delta';
						break;
					case 'È':
					case 'É':
					case 'Ê':
					case 'Ë':
					case 'E':
						letter = 'E';
						title = 'Echo';
						break;
					case 'F':
						title = 'Foxtrott';
						break;
					case 'G':
						title = 'Golf';
						break;
					case 'H':
						title = 'Hotel';
						break;
					case 'Ì':
					case 'Í':
					case 'Î':
					case 'Ï':
					case 'I':
						letter = 'I';
						title = 'India';
						break;
					case 'J':
						title = 'Juliet';
						break;
					case 'K':
						title = 'Kilo';
						break;
					case 'L':
						title = 'Lima';
						break;
					case 'M':
						title = 'Mike';
						break;
					case 'Ñ':
					case 'N':
						letter = 'N';
						title = 'November';
						break;
					case 'Ò':
					case 'Œ':
					case 'Ó':
					case 'Ô':
					case 'Õ':
					case 'Ö':
					case 'Ø':
					case 'O':
						letter = 'O';
						title = 'Oscar';
						break;
					case 'P':
						title = 'Papa';
						break;
					case 'Q':
						title = 'Quebec';
						break;
					case 'R':
						title = 'Romeo';
						break;
					case 'Š':
					case 'S':
						letter = 'S';
						title = 'Sierra';
						break;
					case 'T':
						title = 'Tango';
						break;
					case 'Ù':
					case 'Ú':
					case 'Û':
					case 'Ü':
					case 'U':
						letter = 'U';
						title = 'Uniform';
						break;
					case 'V':
						title = 'Victor';
						break;
					case 'W':
						title = 'Whiskey';
						break;
					case 'X':
						title = 'X-Ray';
						break;
					case 'Ý':
					case 'Ÿ':
					case 'Y':
						letter = 'Y';
						title = 'Yankee';
						break;
					case 'Ž':
					case 'Z':
						letter = 'Z';
						title = 'Zulu';
						break;
					case '0':
						title = 'Nadazero';
						break;
					case '1':
						title = 'Unaone';
						break;
					case '2':
						title = 'Bissotwo';
						break;
					case '3':
						title = 'Terathree';
						break;
					case '4':
						title = 'Quartafour';
						break;
					case '5':
						title = 'Pentafive';
						break;
					case '6':
						title = 'Soxisix';
						break;
					case '7':
						title = 'Setaseven';
						break;
					case '8':
						title = 'Octoeight';
						break;
					case '9':
						title = 'Novenine';
						break;
					default:
						aBlank = true;
						title = "";
						break;
				}
				morse = findMorse(letter);

				if (!aBlank) {
					if (document.getElementById('translation-type').checked) {
						translationContent += `<b>${morse}</b>&nbsp;&nbsp;&nbsp;`;
					} else {
						let imgName = letter.toLowerCase() + ".gif";
						translationContent += (`<img src="${imgName}" alt="${letter}" title="${title}">&nbsp;`);
					}
				} else {
					translationContent += ('&nbsp;');
				}
			} else {
				translationContent += ('<br>'); // A break for each blank
			}
		}
		document.getElementById('translated').innerHTML = translationContent;
	}

	function getPrm(prmName) {
		let loc = document.location.toString();
		let i = loc.indexOf(prmName + "=");
		let value = '';
		if (i > -1) {
			let str = loc.substr((prmName.length + 1) + i);
			let j = str.indexOf('&');
			if (j > -1) {
				value = str.substr(0, j);
			} else {
				value = str;
			}
		}
		//alert(prmName + " = " + value);    
		return value;
	}

	function checkQS() {
		let qs = getPrm("txt");
		if (qs != null && qs.length > 0) {
			codeTranslate(unescape(qs));
		}
	}
</script>

<style type="text/css">
	body {
		font-family: 'Courier New', Courier, monospace;
		font-weight: bold;
		color: navy;
	}

	.translation {
		background-color: silver; 
		padding: 5px; 
		margin-top: 5px; 
		border-radius: 3px;
	}
</style>

<!--body background="bground.jpg" onLoad="checkQS();"-->
<body onLoad="checkQS();">
	<h2>International Code of Signals</h2>
	<div style="text-align: left;">
		Enter a text below and hit the Translate button. 
		<br/>
		<input type="checkbox" id="translation-type">In Morse
		<br/>
		<a href="#" onclick="loremIpsum();" title="If you're lazy...">Lorem Ipsum...</a>
		<br>
		<textarea id="original-text" spellcheck="false" cols="60" rows="5"></textarea>
		<br><br>
		<button onClick="codeTranslate(document.getElementById('original-text').value);">Translate</button>
	</div>
	<div id="translated" class="translation"></div>
	<hr>
	<address>&copy; 2001, 2021 and beyond, Oliv Cool Stuff Soft Strikes Again</address>
</body>

</html>